# 知识图谱构建优化配置

## 概述
为了加快知识图谱的构建过程，我们对系统进行了以下优化：

## 主要优化

### 1. 增加块大小
- **原配置**: CHUNK_SIZE=500
- **新配置**: CHUNK_SIZE=1000
- **效果**: 减少LLM调用次数，提高处理速度

### 2. 增加并发处理
- **原配置**: LLM_CONCURRENCY=8
- **新配置**: LLM_CONCURRENCY=12
- **效果**: 提高并行处理能力

### 3. 批处理优化
- **新增**: GRAPH_BATCH_SIZE=5
- **效果**: 每次批量处理5个文档块

### 4. 减少延迟
- **原配置**: 0.3秒延迟
- **新配置**: GRAPH_DELAY=0.1
- **效果**: 减少API调用间隔

### 5. 异步处理
- 使用asyncio进行异步处理
- 使用信号量控制并发数
- 批量处理减少网络开销

## 环境变量配置

在 `backend/.env` 文件中添加以下配置：

```env
# 知识图谱构建优化配置
CHUNK_SIZE=1000
CHUNK_OVERLAP=200
LLM_CONCURRENCY=12
GRAPH_BATCH_SIZE=5
GRAPH_DELAY=0.1
GRAPH_CONCURRENCY=8
```

## 性能提升预期

1. **处理速度**: 预计提升 2-3 倍
2. **API调用**: 减少约 50% 的调用次数
3. **内存使用**: 优化批处理，减少内存占用
4. **错误处理**: 改进异常处理机制

## 使用建议

1. **大文件处理**: 对于大型PDF文件，建议分批上传
2. **队列管理**: 使用新增的清空队列功能管理处理队列
3. **批量删除**: 使用批量删除功能清理不需要的文件
4. **监控进度**: 关注处理进度，及时处理失败的项目

## 注意事项

1. 增加块大小可能影响知识图谱的细粒度
2. 高并发可能受到API限制，请根据实际情况调整
3. 建议在非高峰期进行大批量处理
4. 定期清理已完成的知识库文件以节省存储空间 